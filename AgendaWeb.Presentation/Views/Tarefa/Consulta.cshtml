
@* Definir a classe de modelo utilizada nesta página *@
@model AgendaWeb.Presentation.Models.TarefaConsultaModel

@{
   
    Layout = "~/Views/Shared/Layout.cshtml";
}

<div>
    <h5>Consulta de Tarefas</h5>
    <p> Informe o periodo de datas para pesquisa de tarefas na Agenda. </p>
    <hr/>


    @using (Html.BeginForm())
    {
        <div class="row mb-3">
          <div class"col-md-3">
              <label>Date de inicio</label>
              @Html.TextBoxFor(model=> model.DateMin, new {@class = "form-control", @type = "date"})

              <div class="text-danger">
                  @Html.ValidationMessageFor(model=>model.DateMin)
              </div>
          </div>  
      

           <div class="row mb-3">
              <div class"col-md-3">
                <label> Date de fim </label>
                @Html.TextBoxFor(model=> model.DateMax, new {@class = "form-control", @type = "date"})

                 <div class="text-danger">
                  @Html.ValidationMessageFor(model=>model.DateMax)
                 </div>

             </div>
          </div>  
        </div>

          <div class="row mb-3">
              <div class="col-md-12">
                  <input type="submit" value="Pesquisar Tarefa" class="btn btn-success"/>
              </div> 
          </div>
    }




    <!--- imprimir a lista de tarefas obtida na consulta-->

                         <!-- if é pra ver se tem algo para imprimir -->
    @if (Model != null && Model.Tarefa != null) 

    {
        <table class ="table table-sm table-hover">

             <!-- thead cabeçario   -->
             <thead>
                 <tr>
                     <th>Nome da Tarefa</th>
                     <th>Data</th>
                     <th>Hora</th>
                     <th>Prioridade</th>
                     <th>Descrição</th>
                     <th>Operação</th>
                 </tr>
             </thead>
              <!-- tbody corpo -->
             <tbody>
                @foreach(var item in Model.Tarefa)
                {
                  <tr>
                    <td>@item.Nome</td>
                    <td>@item.Data</td>
                    <td>@item.Hora</td>
                    <td>@item.Prioridade</td> 
                    <td>@item.Descricao</td>
                    <td>
                    <a href="/Tarefa/edicao?id=@item.IdTarefa" class="btn btn-primary btn-sm">
                      Editar
                    </a>
                    <a href="/Tarefa/Exclusao?id=@item.IdTarefa" 
                      onclick="return confirm('Deseja excluir a tarefa selecionada?');"
                      class="btn btn-danger btn-sm">
                      Excluir
                    </a>
                    </td>
                  </tr>
                }
            </tbody>
                <!--  tfoot rodaper -->
             <tfoot>
                 <tr>
                      <td colspan="3">
                          Quantidade de tarefas obtidas: @Model.Tarefa.Count
                      </td>
                 </tr>
             </tfoot>
        </table>
    }

</div>

